# syntax=docker/dockerfile:1

# grab the golang image from alpine
FROM golang:1.16-alpine

# instructs Docker to use this directory as the default destination for all subsequent commands.
WORKDIR /app

# Weâ€™ll copy the go.mod and go.sum file into our project directory /app which, owing to our use of WORKDIR, is the current directory (.) inside the image.
#COPY go.mod ./
#COPY go.sum ./

# Now that we have the module files inside the Docker image that we are building, we can use the RUN command to execute the command go mod download there as well.
RUN go mod download

# copy our source code into the image.
COPY /gowiki/*.go ./gowiki

# Now, we would like to compile our application.
RUN go build -o /docker-gs-ping

# Now, all that is left to do is to tell Docker what command to execute when our image is used to start a container.
CMD [ "/docker-gs-ping" ]
